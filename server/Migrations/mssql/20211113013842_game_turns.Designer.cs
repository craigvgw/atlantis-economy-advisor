// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using advisor.Persistence;

namespace advisor.Migrations.mssql
{
    [DbContext(typeof(MsSqlDatabase))]
    [Migration("20211113013842_game_turns")]
    partial class game_turns
    {
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("Relational:MaxIdentifierLength", 128)
                .HasAnnotation("ProductVersion", "5.0.4")
                .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

            modelBuilder.Entity("advisor.Persistence.DbAlliance", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<long>("GameId")
                        .HasColumnType("bigint");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.HasKey("Id");

                    b.HasIndex("GameId");

                    b.ToTable("Alliances");
                });

            modelBuilder.Entity("advisor.Persistence.DbAllianceMember", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<long>("AllianceId")
                        .HasColumnType("bigint");

                    b.Property<bool>("CanInvite")
                        .HasColumnType("bit");

                    b.Property<bool>("Owner")
                        .HasColumnType("bit");

                    b.Property<bool>("ShareMap")
                        .HasColumnType("bit");

                    b.Property<bool>("TeachMages")
                        .HasColumnType("bit");

                    b.HasKey("PlayerId", "AllianceId");

                    b.HasIndex("AllianceId");

                    b.ToTable("AllianceMembers");
                });

            modelBuilder.Entity("advisor.Persistence.DbAttitude", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<int>("FactionNumber")
                        .HasColumnType("int");

                    b.Property<int>("TargetFactionNumber")
                        .HasColumnType("int");

                    b.Property<string>("Stance")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("PlayerId", "TurnNumber", "FactionNumber", "TargetFactionNumber");

                    b.ToTable("Attitudes");
                });

            modelBuilder.Entity("advisor.Persistence.DbEvent", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<int?>("Amount")
                        .HasColumnType("int");

                    b.Property<string>("Category")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("FactionNumber")
                        .HasColumnType("int");

                    b.Property<string>("ItemCode")
                        .HasMaxLength(8)
                        .HasColumnType("nvarchar(8)");

                    b.Property<string>("ItemName")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<int?>("ItemPrice")
                        .HasColumnType("int");

                    b.Property<string>("Message")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int?>("MissingUnitNumber")
                        .HasColumnType("int");

                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<string>("RegionId")
                        .HasMaxLength(14)
                        .HasColumnType("nvarchar(14)");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("UnitName")
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)");

                    b.Property<int?>("UnitNumber")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("PlayerId", "TurnNumber", "FactionNumber");

                    b.HasIndex("PlayerId", "TurnNumber", "RegionId");

                    b.HasIndex("PlayerId", "TurnNumber", "UnitNumber");

                    b.ToTable("Events");
                });

            modelBuilder.Entity("advisor.Persistence.DbExit", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<string>("OriginRegionId")
                        .HasMaxLength(14)
                        .HasColumnType("nvarchar(14)");

                    b.Property<string>("TargetRegionId")
                        .HasMaxLength(14)
                        .HasColumnType("nvarchar(14)");

                    b.Property<string>("Direction")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("PlayerId", "TurnNumber", "OriginRegionId", "TargetRegionId");

                    b.HasIndex("PlayerId", "TurnNumber", "TargetRegionId");

                    b.ToTable("Exits");
                });

            modelBuilder.Entity("advisor.Persistence.DbFaction", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<int>("Number")
                        .HasColumnType("int");

                    b.Property<string>("DefaultAttitude")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.HasKey("PlayerId", "TurnNumber", "Number");

                    b.ToTable("Factions");
                });

            modelBuilder.Entity("advisor.Persistence.DbGame", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("EngineVersion")
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("Options")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Ruleset")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("RulesetName")
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)");

                    b.Property<string>("RulesetVersion")
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Games");
                });

            modelBuilder.Entity("advisor.Persistence.DbGameArticle", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<long>("GameId")
                        .HasColumnType("bigint");

                    b.Property<string>("Text")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(32)
                        .HasColumnType("nvarchar(32)");

                    b.HasKey("Id");

                    b.HasIndex("GameId", "TurnNumber");

                    b.ToTable("Articles");
                });

            modelBuilder.Entity("advisor.Persistence.DbGameTurn", b =>
                {
                    b.Property<long>("GameId")
                        .HasColumnType("bigint");

                    b.Property<int>("Number")
                        .HasColumnType("int");

                    b.Property<byte[]>("GameData")
                        .HasColumnType("varbinary(max)");

                    b.Property<byte[]>("PlayerData")
                        .HasColumnType("varbinary(max)");

                    b.HasKey("GameId", "Number");

                    b.ToTable("GameTurns");
                });

            modelBuilder.Entity("advisor.Persistence.DbMarketItem", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<string>("RegionId")
                        .HasMaxLength(14)
                        .HasColumnType("nvarchar(14)");

                    b.Property<string>("Market")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("Code")
                        .HasMaxLength(8)
                        .HasColumnType("nvarchar(8)");

                    b.Property<int>("Amount")
                        .HasColumnType("int");

                    b.Property<int>("Price")
                        .HasColumnType("int");

                    b.HasKey("PlayerId", "TurnNumber", "RegionId", "Market", "Code");

                    b.ToTable("Markets");
                });

            modelBuilder.Entity("advisor.Persistence.DbPlayer", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<long>("GameId")
                        .HasColumnType("bigint");

                    b.Property<bool>("IsQuit")
                        .HasColumnType("bit");

                    b.Property<int>("LastTurnNumber")
                        .HasColumnType("int");

                    b.Property<string>("Name")
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)");

                    b.Property<int?>("Number")
                        .HasColumnType("int");

                    b.Property<string>("Password")
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("GameId");

                    b.HasIndex("UserId");

                    b.ToTable("Players");
                });

            modelBuilder.Entity("advisor.Persistence.DbProductionItem", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<string>("RegionId")
                        .HasMaxLength(14)
                        .HasColumnType("nvarchar(14)");

                    b.Property<string>("Code")
                        .HasMaxLength(8)
                        .HasColumnType("nvarchar(8)");

                    b.Property<int>("Amount")
                        .HasColumnType("int");

                    b.HasKey("PlayerId", "TurnNumber", "RegionId", "Code");

                    b.ToTable("Production");
                });

            modelBuilder.Entity("advisor.Persistence.DbRegion", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<string>("Id")
                        .HasMaxLength(14)
                        .HasColumnType("nvarchar(14)");

                    b.Property<int>("Entertainment")
                        .HasColumnType("int");

                    b.Property<bool>("Explored")
                        .HasColumnType("bit");

                    b.Property<string>("Label")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<int?>("LastVisitedAt")
                        .HasColumnType("int");

                    b.Property<int>("Population")
                        .HasColumnType("int");

                    b.Property<string>("Province")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("Race")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<int>("Tax")
                        .HasColumnType("int");

                    b.Property<string>("Terrain")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<int>("TotalWages")
                        .HasColumnType("int");

                    b.Property<double>("Wages")
                        .HasColumnType("float");

                    b.Property<int>("X")
                        .HasColumnType("int");

                    b.Property<int>("Y")
                        .HasColumnType("int");

                    b.Property<int>("Z")
                        .HasColumnType("int");

                    b.HasKey("PlayerId", "TurnNumber", "Id");

                    b.ToTable("Regions");
                });

            modelBuilder.Entity("advisor.Persistence.DbReport", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<int>("FactionNumber")
                        .HasColumnType("int");

                    b.Property<string>("FactionName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("Json")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Source")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("PlayerId", "TurnNumber", "FactionNumber");

                    b.ToTable("Reports");
                });

            modelBuilder.Entity("advisor.Persistence.DbStat", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<int>("FactionNumber")
                        .HasColumnType("int");

                    b.Property<string>("RegionId")
                        .HasMaxLength(14)
                        .HasColumnType("nvarchar(14)");

                    b.HasKey("PlayerId", "TurnNumber", "FactionNumber", "RegionId");

                    b.HasIndex("PlayerId", "TurnNumber", "RegionId");

                    b.ToTable("Stats");
                });

            modelBuilder.Entity("advisor.Persistence.DbStatItem", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<int>("FactionNumber")
                        .HasColumnType("int");

                    b.Property<string>("RegionId")
                        .HasMaxLength(14)
                        .HasColumnType("nvarchar(14)");

                    b.Property<string>("Code")
                        .HasMaxLength(8)
                        .HasColumnType("nvarchar(8)");

                    b.Property<int>("Amount")
                        .HasColumnType("int");

                    b.Property<int?>("FactionNumber1")
                        .HasColumnType("int");

                    b.Property<long?>("FactionPlayerId")
                        .HasColumnType("bigint");

                    b.Property<int?>("FactionTurnNumber")
                        .HasColumnType("int");

                    b.Property<string>("RegionId1")
                        .HasColumnType("nvarchar(14)");

                    b.Property<long?>("RegionPlayerId")
                        .HasColumnType("bigint");

                    b.Property<int?>("RegionTurnNumber")
                        .HasColumnType("int");

                    b.HasKey("PlayerId", "TurnNumber", "FactionNumber", "RegionId", "Code");

                    b.HasIndex("FactionPlayerId", "FactionTurnNumber", "FactionNumber1");

                    b.HasIndex("RegionPlayerId", "RegionTurnNumber", "RegionId1");

                    b.ToTable("StatItems");
                });

            modelBuilder.Entity("advisor.Persistence.DbStructure", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<string>("Id")
                        .HasMaxLength(24)
                        .HasColumnType("nvarchar(24)");

                    b.Property<string>("Contents")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Description")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("Flags")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<int?>("Needs")
                        .HasColumnType("int");

                    b.Property<int>("Number")
                        .HasColumnType("int");

                    b.Property<string>("RegionId")
                        .HasMaxLength(14)
                        .HasColumnType("nvarchar(14)");

                    b.Property<string>("SailDirections")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("Sequence")
                        .HasColumnType("int");

                    b.Property<int?>("Speed")
                        .HasColumnType("int");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)");

                    b.HasKey("PlayerId", "TurnNumber", "Id");

                    b.HasIndex("PlayerId", "TurnNumber", "RegionId");

                    b.ToTable("Structures");
                });

            modelBuilder.Entity("advisor.Persistence.DbStudyPlan", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<int>("UnitNumber")
                        .HasColumnType("int");

                    b.Property<string>("Study")
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)");

                    b.Property<string>("Teach")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("PlayerId", "TurnNumber", "UnitNumber");

                    b.ToTable("StudyPlans");
                });

            modelBuilder.Entity("advisor.Persistence.DbTurn", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("Number")
                        .HasColumnType("int");

                    b.Property<int>("Month")
                        .HasColumnType("int");

                    b.Property<bool>("Ready")
                        .HasColumnType("bit");

                    b.Property<int>("Year")
                        .HasColumnType("int");

                    b.HasKey("PlayerId", "Number");

                    b.ToTable("Turns");
                });

            modelBuilder.Entity("advisor.Persistence.DbUnit", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<int>("Number")
                        .HasColumnType("int");

                    b.Property<string>("CanStudy")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("CombatSpell")
                        .HasMaxLength(8)
                        .HasColumnType("nvarchar(8)");

                    b.Property<string>("Description")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<int?>("FactionNumber")
                        .HasColumnType("int");

                    b.Property<string>("Flags")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<bool>("OnGuard")
                        .HasColumnType("bit");

                    b.Property<string>("Orders")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ReadyItem")
                        .HasMaxLength(8)
                        .HasColumnType("nvarchar(8)");

                    b.Property<string>("RegionId")
                        .HasMaxLength(14)
                        .HasColumnType("nvarchar(14)");

                    b.Property<int>("Sequence")
                        .HasColumnType("int");

                    b.Property<string>("Skills")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("StrcutureId")
                        .HasMaxLength(24)
                        .HasColumnType("nvarchar(24)");

                    b.Property<int?>("StrcutureNumber")
                        .HasColumnType("int");

                    b.Property<int?>("Weight")
                        .HasColumnType("int");

                    b.HasKey("PlayerId", "TurnNumber", "Number");

                    b.HasIndex("PlayerId", "TurnNumber", "FactionNumber");

                    b.HasIndex("PlayerId", "TurnNumber", "RegionId");

                    b.HasIndex("PlayerId", "TurnNumber", "StrcutureId");

                    b.ToTable("Units");
                });

            modelBuilder.Entity("advisor.Persistence.DbUnitItem", b =>
                {
                    b.Property<long>("PlayerId")
                        .HasColumnType("bigint");

                    b.Property<int>("TurnNumber")
                        .HasColumnType("int");

                    b.Property<int>("UnitNumber")
                        .HasColumnType("int");

                    b.Property<string>("Code")
                        .HasMaxLength(8)
                        .HasColumnType("nvarchar(8)");

                    b.Property<int>("Amount")
                        .HasColumnType("int");

                    b.HasKey("PlayerId", "TurnNumber", "UnitNumber", "Code");

                    b.ToTable("Items");
                });

            modelBuilder.Entity("advisor.Persistence.DbUser", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("Algorithm")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Digest")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("nvarchar(128)");

                    b.Property<string>("Roles")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Salt")
                        .IsRequired()
                        .HasMaxLength(32)
                        .HasColumnType("nvarchar(32)");

                    b.HasKey("Id");

                    b.HasIndex("Email")
                        .IsUnique();

                    b.ToTable("Users");
                });

            modelBuilder.Entity("advisor.Persistence.DbAlliance", b =>
                {
                    b.HasOne("advisor.Persistence.DbGame", "Game")
                        .WithMany("Alliances")
                        .HasForeignKey("GameId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Game");
                });

            modelBuilder.Entity("advisor.Persistence.DbAllianceMember", b =>
                {
                    b.HasOne("advisor.Persistence.DbAlliance", "Alliance")
                        .WithMany("Members")
                        .HasForeignKey("AllianceId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbPlayer", "Player")
                        .WithMany("AllianceMembererships")
                        .HasForeignKey("PlayerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Alliance");

                    b.Navigation("Player");
                });

            modelBuilder.Entity("advisor.Persistence.DbAttitude", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", "Turn")
                        .WithMany("Attitudes")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbFaction", "Faction")
                        .WithMany("Attitudes")
                        .HasForeignKey("PlayerId", "TurnNumber", "FactionNumber")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Faction");

                    b.Navigation("Turn");
                });

            modelBuilder.Entity("advisor.Persistence.DbEvent", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", "Turn")
                        .WithMany("Events")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbFaction", "Faction")
                        .WithMany("Events")
                        .HasForeignKey("PlayerId", "TurnNumber", "FactionNumber")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbRegion", "Region")
                        .WithMany("Events")
                        .HasForeignKey("PlayerId", "TurnNumber", "RegionId");

                    b.HasOne("advisor.Persistence.DbUnit", "Unit")
                        .WithMany("Events")
                        .HasForeignKey("PlayerId", "TurnNumber", "UnitNumber");

                    b.Navigation("Faction");

                    b.Navigation("Region");

                    b.Navigation("Turn");

                    b.Navigation("Unit");
                });

            modelBuilder.Entity("advisor.Persistence.DbExit", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", "Turn")
                        .WithMany("Exits")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbRegion", "Origin")
                        .WithMany("Exits")
                        .HasForeignKey("PlayerId", "TurnNumber", "OriginRegionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbRegion", "Target")
                        .WithMany()
                        .HasForeignKey("PlayerId", "TurnNumber", "TargetRegionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Origin");

                    b.Navigation("Target");

                    b.Navigation("Turn");
                });

            modelBuilder.Entity("advisor.Persistence.DbFaction", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", "Turn")
                        .WithMany("Factions")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Turn");
                });

            modelBuilder.Entity("advisor.Persistence.DbGameArticle", b =>
                {
                    b.HasOne("advisor.Persistence.DbGame", "Game")
                        .WithMany("Articles")
                        .HasForeignKey("GameId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbGameTurn", "Turn")
                        .WithMany("Articles")
                        .HasForeignKey("GameId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Game");

                    b.Navigation("Turn");
                });

            modelBuilder.Entity("advisor.Persistence.DbGameTurn", b =>
                {
                    b.HasOne("advisor.Persistence.DbGame", "Game")
                        .WithMany("Turns")
                        .HasForeignKey("GameId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Game");
                });

            modelBuilder.Entity("advisor.Persistence.DbMarketItem", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", null)
                        .WithMany("Markets")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbRegion", "Region")
                        .WithMany("Markets")
                        .HasForeignKey("PlayerId", "TurnNumber", "RegionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Region");
                });

            modelBuilder.Entity("advisor.Persistence.DbPlayer", b =>
                {
                    b.HasOne("advisor.Persistence.DbGame", "Game")
                        .WithMany("Players")
                        .HasForeignKey("GameId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbUser", "User")
                        .WithMany("Players")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Game");

                    b.Navigation("User");
                });

            modelBuilder.Entity("advisor.Persistence.DbProductionItem", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", null)
                        .WithMany("Production")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbRegion", "Region")
                        .WithMany("Produces")
                        .HasForeignKey("PlayerId", "TurnNumber", "RegionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Region");
                });

            modelBuilder.Entity("advisor.Persistence.DbRegion", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", "Turn")
                        .WithMany("Regions")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.OwnsOne("advisor.Persistence.DbSettlement", "Settlement", b1 =>
                        {
                            b1.Property<long>("DbRegionPlayerId")
                                .HasColumnType("bigint");

                            b1.Property<int>("DbRegionTurnNumber")
                                .HasColumnType("int");

                            b1.Property<string>("DbRegionId")
                                .HasColumnType("nvarchar(14)");

                            b1.Property<string>("Name")
                                .HasMaxLength(256)
                                .HasColumnType("nvarchar(256)");

                            b1.Property<string>("Size")
                                .IsRequired()
                                .HasColumnType("nvarchar(max)");

                            b1.HasKey("DbRegionPlayerId", "DbRegionTurnNumber", "DbRegionId");

                            b1.ToTable("Regions");

                            b1.WithOwner()
                                .HasForeignKey("DbRegionPlayerId", "DbRegionTurnNumber", "DbRegionId");
                        });

                    b.Navigation("Settlement");

                    b.Navigation("Turn");
                });

            modelBuilder.Entity("advisor.Persistence.DbReport", b =>
                {
                    b.HasOne("advisor.Persistence.DbPlayer", "Player")
                        .WithMany("Reports")
                        .HasForeignKey("PlayerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbTurn", "Turn")
                        .WithMany("Reports")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Player");

                    b.Navigation("Turn");
                });

            modelBuilder.Entity("advisor.Persistence.DbStat", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", "Turn")
                        .WithMany("Stats")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbFaction", "Faction")
                        .WithMany("Stats")
                        .HasForeignKey("PlayerId", "TurnNumber", "FactionNumber")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbRegion", "Region")
                        .WithMany("Stats")
                        .HasForeignKey("PlayerId", "TurnNumber", "RegionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.OwnsOne("advisor.Persistence.DbIncomeStats", "Income", b1 =>
                        {
                            b1.Property<long>("DbStatPlayerId")
                                .HasColumnType("bigint");

                            b1.Property<int>("DbStatTurnNumber")
                                .HasColumnType("int");

                            b1.Property<int>("DbStatFactionNumber")
                                .HasColumnType("int");

                            b1.Property<string>("DbStatRegionId")
                                .HasColumnType("nvarchar(14)");

                            b1.Property<int>("Pillage")
                                .HasColumnType("int");

                            b1.Property<int>("Tax")
                                .HasColumnType("int");

                            b1.Property<int>("Trade")
                                .HasColumnType("int");

                            b1.Property<int>("Work")
                                .HasColumnType("int");

                            b1.HasKey("DbStatPlayerId", "DbStatTurnNumber", "DbStatFactionNumber", "DbStatRegionId");

                            b1.ToTable("Stats");

                            b1.WithOwner()
                                .HasForeignKey("DbStatPlayerId", "DbStatTurnNumber", "DbStatFactionNumber", "DbStatRegionId");
                        });

                    b.Navigation("Faction");

                    b.Navigation("Income");

                    b.Navigation("Region");

                    b.Navigation("Turn");
                });

            modelBuilder.Entity("advisor.Persistence.DbStatItem", b =>
                {
                    b.HasOne("advisor.Persistence.DbFaction", "Faction")
                        .WithMany()
                        .HasForeignKey("FactionPlayerId", "FactionTurnNumber", "FactionNumber1");

                    b.HasOne("advisor.Persistence.DbRegion", "Region")
                        .WithMany()
                        .HasForeignKey("RegionPlayerId", "RegionTurnNumber", "RegionId1");

                    b.HasOne("advisor.Persistence.DbStat", "Stat")
                        .WithMany("Production")
                        .HasForeignKey("PlayerId", "TurnNumber", "FactionNumber", "RegionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Faction");

                    b.Navigation("Region");

                    b.Navigation("Stat");
                });

            modelBuilder.Entity("advisor.Persistence.DbStructure", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", "Turn")
                        .WithMany("Structures")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbRegion", "Region")
                        .WithMany("Structures")
                        .HasForeignKey("PlayerId", "TurnNumber", "RegionId");

                    b.OwnsOne("advisor.Persistence.DbSailors", "Sailors", b1 =>
                        {
                            b1.Property<long>("DbStructurePlayerId")
                                .HasColumnType("bigint");

                            b1.Property<int>("DbStructureTurnNumber")
                                .HasColumnType("int");

                            b1.Property<string>("DbStructureId")
                                .HasColumnType("nvarchar(24)");

                            b1.Property<int>("Current")
                                .HasColumnType("int");

                            b1.Property<int>("Required")
                                .HasColumnType("int");

                            b1.HasKey("DbStructurePlayerId", "DbStructureTurnNumber", "DbStructureId");

                            b1.ToTable("Structures");

                            b1.WithOwner()
                                .HasForeignKey("DbStructurePlayerId", "DbStructureTurnNumber", "DbStructureId");
                        });

                    b.OwnsOne("advisor.Persistence.DbTransportationLoad", "Load", b1 =>
                        {
                            b1.Property<long>("DbStructurePlayerId")
                                .HasColumnType("bigint");

                            b1.Property<int>("DbStructureTurnNumber")
                                .HasColumnType("int");

                            b1.Property<string>("DbStructureId")
                                .HasColumnType("nvarchar(24)");

                            b1.Property<int>("Max")
                                .HasColumnType("int");

                            b1.Property<int>("Used")
                                .HasColumnType("int");

                            b1.HasKey("DbStructurePlayerId", "DbStructureTurnNumber", "DbStructureId");

                            b1.ToTable("Structures");

                            b1.WithOwner()
                                .HasForeignKey("DbStructurePlayerId", "DbStructureTurnNumber", "DbStructureId");
                        });

                    b.Navigation("Load");

                    b.Navigation("Region");

                    b.Navigation("Sailors");

                    b.Navigation("Turn");
                });

            modelBuilder.Entity("advisor.Persistence.DbStudyPlan", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", "Turn")
                        .WithMany("Plans")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbUnit", "Unit")
                        .WithOne("Plan")
                        .HasForeignKey("advisor.Persistence.DbStudyPlan", "PlayerId", "TurnNumber", "UnitNumber")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.OwnsOne("advisor.Persistence.DbSkill", "Target", b1 =>
                        {
                            b1.Property<long>("DbStudyPlanPlayerId")
                                .HasColumnType("bigint");

                            b1.Property<int>("DbStudyPlanTurnNumber")
                                .HasColumnType("int");

                            b1.Property<int>("DbStudyPlanUnitNumber")
                                .HasColumnType("int");

                            b1.Property<string>("Code")
                                .HasMaxLength(8)
                                .HasColumnType("nvarchar(8)");

                            b1.Property<int?>("Level")
                                .HasColumnType("int");

                            b1.HasKey("DbStudyPlanPlayerId", "DbStudyPlanTurnNumber", "DbStudyPlanUnitNumber");

                            b1.ToTable("StudyPlans");

                            b1.WithOwner()
                                .HasForeignKey("DbStudyPlanPlayerId", "DbStudyPlanTurnNumber", "DbStudyPlanUnitNumber");
                        });

                    b.Navigation("Target");

                    b.Navigation("Turn");

                    b.Navigation("Unit");
                });

            modelBuilder.Entity("advisor.Persistence.DbTurn", b =>
                {
                    b.HasOne("advisor.Persistence.DbPlayer", "Player")
                        .WithMany("Turns")
                        .HasForeignKey("PlayerId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Player");
                });

            modelBuilder.Entity("advisor.Persistence.DbUnit", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", "Turn")
                        .WithMany("Units")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbFaction", "Faction")
                        .WithMany("Units")
                        .HasForeignKey("PlayerId", "TurnNumber", "FactionNumber");

                    b.HasOne("advisor.Persistence.DbRegion", "Region")
                        .WithMany("Units")
                        .HasForeignKey("PlayerId", "TurnNumber", "RegionId");

                    b.HasOne("advisor.Persistence.DbStructure", "Structure")
                        .WithMany("Units")
                        .HasForeignKey("PlayerId", "TurnNumber", "StrcutureId");

                    b.OwnsOne("advisor.Persistence.DbCapacity", "Capacity", b1 =>
                        {
                            b1.Property<long>("DbUnitPlayerId")
                                .HasColumnType("bigint");

                            b1.Property<int>("DbUnitTurnNumber")
                                .HasColumnType("int");

                            b1.Property<int>("DbUnitNumber")
                                .HasColumnType("int");

                            b1.Property<int>("Flying")
                                .HasColumnType("int");

                            b1.Property<int>("Riding")
                                .HasColumnType("int");

                            b1.Property<int>("Swimming")
                                .HasColumnType("int");

                            b1.Property<int>("Walking")
                                .HasColumnType("int");

                            b1.HasKey("DbUnitPlayerId", "DbUnitTurnNumber", "DbUnitNumber");

                            b1.ToTable("Units");

                            b1.WithOwner()
                                .HasForeignKey("DbUnitPlayerId", "DbUnitTurnNumber", "DbUnitNumber");
                        });

                    b.Navigation("Capacity");

                    b.Navigation("Faction");

                    b.Navigation("Region");

                    b.Navigation("Structure");

                    b.Navigation("Turn");
                });

            modelBuilder.Entity("advisor.Persistence.DbUnitItem", b =>
                {
                    b.HasOne("advisor.Persistence.DbTurn", null)
                        .WithMany("Items")
                        .HasForeignKey("PlayerId", "TurnNumber")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("advisor.Persistence.DbUnit", "Unit")
                        .WithMany("Items")
                        .HasForeignKey("PlayerId", "TurnNumber", "UnitNumber")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Unit");
                });

            modelBuilder.Entity("advisor.Persistence.DbAlliance", b =>
                {
                    b.Navigation("Members");
                });

            modelBuilder.Entity("advisor.Persistence.DbFaction", b =>
                {
                    b.Navigation("Attitudes");

                    b.Navigation("Events");

                    b.Navigation("Stats");

                    b.Navigation("Units");
                });

            modelBuilder.Entity("advisor.Persistence.DbGame", b =>
                {
                    b.Navigation("Alliances");

                    b.Navigation("Articles");

                    b.Navigation("Players");

                    b.Navigation("Turns");
                });

            modelBuilder.Entity("advisor.Persistence.DbGameTurn", b =>
                {
                    b.Navigation("Articles");
                });

            modelBuilder.Entity("advisor.Persistence.DbPlayer", b =>
                {
                    b.Navigation("AllianceMembererships");

                    b.Navigation("Reports");

                    b.Navigation("Turns");
                });

            modelBuilder.Entity("advisor.Persistence.DbRegion", b =>
                {
                    b.Navigation("Events");

                    b.Navigation("Exits");

                    b.Navigation("Markets");

                    b.Navigation("Produces");

                    b.Navigation("Stats");

                    b.Navigation("Structures");

                    b.Navigation("Units");
                });

            modelBuilder.Entity("advisor.Persistence.DbStat", b =>
                {
                    b.Navigation("Production");
                });

            modelBuilder.Entity("advisor.Persistence.DbStructure", b =>
                {
                    b.Navigation("Units");
                });

            modelBuilder.Entity("advisor.Persistence.DbTurn", b =>
                {
                    b.Navigation("Attitudes");

                    b.Navigation("Events");

                    b.Navigation("Exits");

                    b.Navigation("Factions");

                    b.Navigation("Items");

                    b.Navigation("Markets");

                    b.Navigation("Plans");

                    b.Navigation("Production");

                    b.Navigation("Regions");

                    b.Navigation("Reports");

                    b.Navigation("Stats");

                    b.Navigation("Structures");

                    b.Navigation("Units");
                });

            modelBuilder.Entity("advisor.Persistence.DbUnit", b =>
                {
                    b.Navigation("Events");

                    b.Navigation("Items");

                    b.Navigation("Plan");
                });

            modelBuilder.Entity("advisor.Persistence.DbUser", b =>
                {
                    b.Navigation("Players");
                });
#pragma warning restore 612, 618
        }
    }
}
